<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Solar Wizard</title>
<style>
  body{margin:0;font-family:Segoe UI,Arial,sans-serif;background:#f9fafc;color:#333;}
  .container{max-width:480px;margin:20px auto;padding:10px;}
  .card{background:#fff;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.1);padding:20px;margin-top:20px;animation:fadeIn .4s;}
  .step{display:none;}
  .step.active{display:block;}
  h2{margin-top:0;color:#006d77;}
  label{display:block;margin-top:12px;font-weight:600;}
  input,select{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ccc;font-size:1rem;}
  button{background:#006d77;color:#fff;padding:12px;border:none;border-radius:8px;cursor:pointer;margin-top:20px;width:100%;font-size:1rem;}
  button:hover{background:#004f55;}
  .progress{display:flex;justify-content:space-between;margin-bottom:10px;}
  .progress div{flex:1;height:6px;margin:0 3px;background:#ddd;border-radius:3px;}
  .progress .active{background:#006d77;}
  .result-card{background:#e6f5f7;border-left:5px solid #006d77;margin-bottom:12px;padding:12px;border-radius:8px;}
  .actions{display:flex;gap:10px;}
  .actions button{flex:1;}
  @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
</style>
</head>
<body>
<div class="container">

  <!-- Progress Bar -->
  <div class="progress">
    <div id="bar1" class="active"></div>
    <div id="bar2"></div>
    <div id="bar3"></div>
  </div>

  <!-- Step 1 -->
  <div id="step1" class="card step active">
    <h2>Step 1: System Type & Consumption</h2>
    <label>System Type</label>
    <select id="systemType" onchange="toggleSystemType()">
      <option value="grid">Grid-Tied</option>
      <option value="hybrid">Hybrid</option>
      <option value="off">Off-Grid</option>
    </select>

    <label>Daily Energy Consumption (kWh)</label>
    <input id="consumption" type="number" placeholder="e.g. 20">

    <label>Peak Sun Hours</label>
    <input id="psh" type="number" placeholder="e.g. 5">

    <button onclick="nextStep(1)">Next</button>
  </div>

  <!-- Step 2 -->
  <div id="step2" class="card step">
    <h2>Step 2: Panel & Roof</h2>
    <label>Panel Wattage (W)</label>
    <input id="watt" type="number">

    <label>Panel Efficiency (%)</label>
    <input id="eff" type="number">

    <label>System Losses (%)</label>
    <input id="loss" type="number">

    <label>Roof Area</label>
    <input id="roof" type="number" placeholder="Available area">
    <select id="roofUnit">
      <option value="m2">m²</option>
      <option value="ft2">ft²</option>
    </select>

    <label>Tilt Angle (°)</label>
    <input id="tilt" type="number">

    <label>Orientation</label>
    <select id="orientation">
      <option>South</option><option>East</option><option>West</option><option>Flat</option>
    </select>

    <button onclick="nextStep(2)">Next</button>
  </div>

  <!-- Step 2B: Battery (only if Hybrid/Off-Grid) -->
  <div id="step2b" class="card step">
    <h2>Step 2B: Battery Details</h2>
    <label>Autonomy Days</label><input id="autonomy" type="number">
    <label>Depth of Discharge (%)</label><input id="dod" type="number">
    <label>System Voltage (V)</label><input id="voltage" type="number">
    <label>Battery Type</label>
    <select id="batteryType"><option>Lead Acid</option><option>Lithium</option></select>
    <button onclick="nextStep(2.5)">Next</button>
  </div>

  <!-- Step 3 -->
  <div id="step3" class="card step">
    <h2>Step 3: Financials</h2>
    <label>Installed Cost ($/kW)</label><input id="costkw" type="number">
    <label>Tariff ($/kWh)</label><input id="tariff" type="number">
    <label>Incentives (%)</label><input id="incentive" type="number">
    <label>Financing Option</label>
    <select id="finance"><option>No</option><option>Yes</option></select>

    <button onclick="showResults()">Calculate</button>
  </div>

  <!-- Results -->
  <div id="results" class="card step">
    <h2>Results</h2>
    <div id="output">
      <div class="result-card"><b>Panels Required:</b> --</div>
      <div class="result-card"><b>System Capacity:</b> --</div>
      <div class="result-card"><b>Battery Bank:</b> --</div>
      <div class="result-card"><b>Roof Area Required:</b> --</div>
      <div class="result-card"><b>Cost Estimate:</b> --</div>
      <div class="result-card"><b>Yearly Savings:</b> --</div>
      <div class="result-card"><b>Payback Period:</b> --</div>
      <div class="result-card"><b>Carbon Reduction:</b> --</div>
    </div>
    <div class="actions">
      <button onclick="resetAll()">Reset</button>
      <button>Export PDF</button>
    </div>
  </div>

</div>

<script>
  function nextStep(n){
    document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
    if(n===1){ 
      document.getElementById('step2').classList.add('active'); 
      document.getElementById('bar2').classList.add('active');
      if(['hybrid','off'].includes(document.getElementById('systemType').value)){
        document.getElementById('step2b').classList.add('active');
      }
    }
    else if(n===2){ 
      if(['hybrid','off'].includes(document.getElementById('systemType').value)){
        document.getElementById('step2b').classList.add('active');
      } else {
        document.getElementById('step3').classList.add('active'); 
        document.getElementById('bar3').classList.add('active');
      }
    }
    else if(n===2.5){
      document.getElementById('step3').classList.add('active');
      document.getElementById('bar3').classList.add('active');
    }
  }
  function showResults(){
    document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
    document.getElementById('results').classList.add('active');
  }
  function resetAll(){
    document.querySelectorAll('input').forEach(i=>i.value="");
    document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
    document.getElementById('step1').classList.add('active');
    document.getElementById('bar2').classList.remove('active');
    document.getElementById('bar3').classList.remove('active');
  }
  function toggleSystemType(){
    // Could dynamically show/hide battery step
  }
</script>
</body>
</html>
