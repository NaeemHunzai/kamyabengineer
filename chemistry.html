<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Solar Calculator Wizard</title>

<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(145deg, #0a0a0a, #1c1c1c);
    color: #eee;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  .container {
    width: 100%;
    max-width: 420px;
    background: rgba(25,25,25,0.9);
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.6);
  }
  .step { display: none; animation: fade 0.4s ease; }
  .step.active { display: block; }
  @keyframes fade { from {opacity:0;} to {opacity:1;} }

  h2 { text-align: center; margin-bottom: 10px; color: #00ffc6; }
  label { display: block; margin: 15px 0 5px; font-size: 14px; }
  input {
    width: 100%; padding: 10px;
    border-radius: 8px; border: none;
    background: #111; color: #fff;
    outline: none;
  }
  button {
    width: 100%; padding: 12px;
    margin-top: 15px;
    border: none; border-radius: 8px;
    background: linear-gradient(90deg, #00ffc6, #0096ff);
    color: #000; font-weight: bold;
    cursor: pointer; transition: 0.3s;
  }
  button:hover { opacity: 0.9; }

  .results-card {
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    margin-top: 20px;
    box-shadow: inset 0 0 15px rgba(0,255,200,0.3);
  }
  .results-card h3 { color: #00ffc6; margin-bottom: 15px; }
  .reset-btn { background: #ff4d4d; margin-top: 10px; }
  .pdf-btn { background: #ffaa00; margin-top: 10px; }

  /* Custom Toast Notification */
  .toast {
    visibility: hidden;
    min-width: 250px;
    background: #fff;
    color: #000;
    text-align: center;
    border-radius: 8px;
    padding: 12px;
    position: fixed;
    left: 50%;
    bottom: 30px;
    transform: translateX(-50%);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 999;
  }
  .toast.show {
    visibility: visible;
    animation: fadein 0.5s, fadeout 0.5s 2.5s;
  }
  @keyframes fadein { from{bottom:0;opacity:0;} to{bottom:30px;opacity:1;} }
  @keyframes fadeout { from{bottom:30px;opacity:1;} to{bottom:0;opacity:0;} }
</style>
</head>
<body>

<div class="container">
  <!-- Step 1 -->
  <div class="step active" id="step1">
    <h2>Step 1: Load</h2>
    <label>Daily Energy (kWh)</label>
    <input type="number" id="daily" min="1">
    <button onclick="nextStep(2)">Next</button>
  </div>

  <!-- Step 2 -->
  <div class="step" id="step2">
    <h2>Step 2: Sun Hours</h2>
    <label>Peak Sun Hours</label>
    <input type="number" id="sun" min="1" step="0.1">
    <button onclick="nextStep(3)">Next</button>
  </div>

  <!-- Step 3 -->
  <div class="step" id="step3">
    <h2>Step 3: Panel Size</h2>
    <label>Panel Wattage (W)</label>
    <input type="number" id="watt" min="10">
    <button onclick="calculate()">Calculate</button>
  </div>

  <!-- Results Page -->
  <div class="step" id="results">
    <h2>Results</h2>
    <div class="results-card" id="resultsContent">
      <!-- JS fills results here -->
    </div>
    <button class="pdf-btn" onclick="exportPDF()">Export as PDF</button>
    <button class="reset-btn" onclick="resetWizard()">Reset</button>
  </div>
</div>

<!-- Toast -->
<div id="toast" class="toast"></div>

<!-- JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
  function showToast(msg){
    let t=document.getElementById("toast");
    t.innerText=msg;
    t.className="toast show";
    setTimeout(()=>{t.className=t.className.replace("show","");},3000);
  }

  function nextStep(step){
    if(step===2 && !document.getElementById('daily').value){
      showToast("Please enter your daily energy need.");
      return;
    }
    if(step===3 && !document.getElementById('sun').value){
      showToast("Please enter peak sun hours.");
      return;
    }
    document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
    document.getElementById('step'+step).classList.add('active');
  }

  function calculate(){
    let daily = parseFloat(document.getElementById('daily').value)||0;
    let sun   = parseFloat(document.getElementById('sun').value)||1;
    let watt  = parseFloat(document.getElementById('watt').value)||1;

    if(!document.getElementById('watt').value){
      showToast("Please enter panel wattage.");
      return;
    }

    let totalWatt = (daily*1000)/sun;
    let panels = Math.ceil(totalWatt/watt);

    document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
    document.getElementById('results').classList.add('active');
    document.getElementById('resultsContent').innerHTML = `
      <h3>Your Solar Setup</h3>
      <p><b>Daily Need:</b> ${daily} kWh</p>
      <p><b>Total Power Required:</b> ${totalWatt.toFixed(0)} W</p>
      <p><b>Panels Needed:</b> ${panels} (of ${watt}W each)</p>
    `;
  }

  function resetWizard(){
    document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
    document.getElementById('step1').classList.add('active');
    document.getElementById('daily').value='';
    document.getElementById('sun').value='';
    document.getElementById('watt').value='';
  }

  function exportPDF(){
    const element = document.getElementById('resultsContent');
    html2pdf().from(element).set({
      margin: 10,
      filename: 'solar_calculator_results.pdf',
      html2canvas: { scale: 2 },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    }).save();
  }
</script>

</body>
</html>
