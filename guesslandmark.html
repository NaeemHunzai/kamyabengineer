<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Guess the Landmark Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- mobile scaling -->
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    #gameContainer {
      background: #fff;
      padding: 16px 20px;
      border-radius: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      text-align: center;
      width: 95%;
      max-width: 700px;
      transition: box-shadow 0.3s ease;
    }

    #gameContainer.correct {
      box-shadow: 0 0 20px 4px #28a745;
    }
    #gameContainer.wrong {
      box-shadow: 0 0 20px 4px #dc3545;
    }

    h1 {
      margin-top: 0;
      font-size: 24px;
      color: #333;
    }

    #score, #timer {
      display: inline-block;
      margin: 8px 12px;
      font-weight: bold;
      font-size: 16px;
      color: #444;
    }

    #landmarkImg {
      width: 100%;
      height: auto;
      max-height: 300px;
      margin: 15px auto;
      display: block;
      border-radius: 10px;
      border: 3px solid #eee;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      object-fit: cover;
    }

    .options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin: 15px auto;
    }

    /* Option buttons */
    .options button {
      padding: 10px;
      font-size: 15px;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background: #007bff;
      color: #fff;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: transform 0.15s ease, background 0.2s;
      word-wrap: break-word;
    }

    .options button:hover:not(:disabled) {
      background: #0056b3;
      transform: scale(1.03);
    }

    .options button:disabled {
      cursor: not-allowed;
      opacity: 0.9;
    }

    /* Next button */
    #nextBtn {
      margin-top: 12px;
      padding: 10px 20px;
      font-size: 15px;
      border: none;
      border-radius: 8px;
      background: #ff9800;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
      width: 100%;
      max-width: 200px;
    }

    #nextBtn:hover:not(:disabled) {
      background: #e68900;
    }

    #nextBtn:disabled {
      background: #aaa;
      cursor: not-allowed;
    }

    label {
      display: block;
      margin-top: 10px;
      font-size: 14px;
      color: #555;
    }

    #gameOver {
      display: none;
      margin-top: 20px;
    }

    #gameOver h2 {
      color: #333;
    }

    /* Restart button */
    #gameOver button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 15px;
      border: none;
      border-radius: 8px;
      background: #007bff;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }

    #gameOver button:hover {
      background: #0056b3;
    }

    /* Preload overlay */
    #preloadOverlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.85);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      color: #fff;
      padding: 20px;
      text-align: center;
    }

    #progressBar {
      width: 80%;
      max-width: 400px;
      height: 16px;
      border: 1px solid #fff;
      margin-top: 20px;
      border-radius: 6px;
      background: #333;
      overflow: hidden;
    }

    #progressFill {
      height: 100%;
      width: 0%;
      background: #ff9800;
      transition: width 0.3s;
    }

    /* Responsive tweaks */
    @media (max-width: 480px) {
      h1 { font-size: 20px; }
      #score, #timer { font-size: 14px; }
      .options { grid-template-columns: 1fr; }
      .options button { font-size: 14px; padding: 10px; }
      #landmarkImg { max-height: 220px; }
    }
  </style>
</head>
<body>
  <!-- Preload overlay -->
  <div id="preloadOverlay">
    <h2>Loading Landmarks...</h2>
    <div id="progressBar"><div id="progressFill"></div></div>
    <p><span id="loadedCount">0</span> / <span id="totalCount">0</span> images loaded</p>
  </div>

  <div id="gameContainer">
    <h1>Guess the Landmark Quiz</h1>
    <div id="score">üèÜ Score: 0</div>
    <div id="timer">‚è± Time Left: <span id="timeLeft">15</span>s</div>

    <img id="landmarkImg" alt="Landmark" />

    <div class="options" id="options"></div>

    <label><input type="checkbox" id="autoNextToggle" checked> Auto Next</label>
    <button id="nextBtn" disabled>Next</button>

    <div id="gameOver">
      <h2>Game Over!</h2>
      <p>Your final score: <span id="finalScore"></span></p>
      <button onclick="restartGame()">Play Again</button>
    </div>
  </div>

  <script>
    const landmarks = [
      { name: "Eiffel Tower", img: "https://upload.wikimedia.org/wikipedia/commons/a/a8/Tour_Eiffel_Wikimedia_Commons.jpg" },
      { name: "Taj Mahal ‚Äì Agra, India", img: "https://upload.wikimedia.org/wikipedia/commons/d/da/Taj-Mahal.jpg" },
      { name: "Rakaposhi Hunza Nagar", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi7x0nBQvwRcVoev9DNjJ5OwDPvjUuOL7_ttGstf2vCiDXwDLmmsmgadikjOhO2lf_sdIvY5wAZvLBT5CWD88fyqKCKN4qntGb0NSHSGmKf_7LDyocnXPjoXUPxpq3yFDWo6kvUv5qoosB0GpK7r6bTBBRBeG8_Ft-xKx2gLIyoodo_OPaiMPWPw25MDwOL/s6016/Mount%20Rakaposhi%20Hunza%20Nagarpexels-wasifmehmood997-19442083.jpg" },
      { name: "Passu Cones Hunza Valley", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjbVbVCVij38FbqsWYa_sNtJmTyB65arfZKQp4guADowY8GTq6NlEdkaDY2s6D2P2JUOAg_NGUvcwMEyXpe64ScfHJCcSrPvaJvI3uWQH6k_WZRPeLm_-g6uddW6EPJrkgfX9EetO-5T6kp0aP4pnAuaKFcYoeZuwQWVZkc8UE_3gcDHGobJcXNuhgtAcTK/s4608/Passu%20Cones%20Hunza%20Valley%20pexels-hilal-aziz-2541642-16883433.jpg" },
      { name: "Faisal Mosque Islamabad", img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhu5Uudh6-znwAi9ZIKLJqBr1e2l8CaGLlXfuBSpxP1JVNMe9js1umabsvFJ0FyYhkWVKfaXwatFaxUrX-W-D_XlbpeLgktXfHCuth0MAXdcPXtOU7DVii52P7Ayl11IepPLGtqLwS_IdMMA1bkMeNlidm7M2dMo8eY6p2TE0R65VHtgVJcggZuvaaa9VOq/s6343/Faisal%20Mosque%20%E2%80%93%20Islamabad%20pexels-faysal9-27698081.jpg" }
    ];

    let score = 0;
    let currentIndex = 0;
    let timer;
    let timeLeft = 15;

    const imgElement = document.getElementById("landmarkImg");
    const optionsContainer = document.getElementById("options");
    const scoreElement = document.getElementById("score");
    const timerElement = document.getElementById("timeLeft");
    const nextBtn = document.getElementById("nextBtn");
    const autoNextToggle = document.getElementById("autoNextToggle");
    const gameOverDiv = document.getElementById("gameOver");
    const finalScore = document.getElementById("finalScore");
    const gameContainer = document.getElementById("gameContainer");

    // preload with error handling
    const preloadOverlay = document.getElementById("preloadOverlay");
    const progressFill = document.getElementById("progressFill");
    const loadedCountEl = document.getElementById("loadedCount");
    const totalCountEl = document.getElementById("totalCount");

    let loadedCount = 0;
    const uniqueImages = [...new Set(landmarks.map(l => l.img))];
    const totalCount = uniqueImages.length;
    totalCountEl.textContent = totalCount;

    function imageLoaded() {
      loadedCount++;
      loadedCountEl.textContent = loadedCount;
      progressFill.style.width = ((loadedCount / totalCount) * 100) + "%";

      if (loadedCount >= totalCount) {
        setTimeout(() => {
          preloadOverlay.style.display = "none";
          startGame();
        }, 400);
      }
    }

    uniqueImages.forEach(src => {
      const img = new Image();
      img.onload = imageLoaded;
      img.onerror = imageLoaded;
      img.src = src;
    });

    function startGame() {
      score = 0;
      currentIndex = 0;
      gameOverDiv.style.display = "none";
      scoreElement.textContent = "üèÜ Score: " + score;
      loadQuestion();
    }

    function loadQuestion() {
      resetState();
      const currentLandmark = landmarks[currentIndex];
      imgElement.src = currentLandmark.img;

      let options = [currentLandmark.name];
      while (options.length < 4) {
        let random = landmarks[Math.floor(Math.random() * landmarks.length)].name;
        if (!options.includes(random)) {
          options.push(random);
        }
      }
      options = options.sort(() => Math.random() - 0.5);

      options.forEach(option => {
        const btn = document.createElement("button");
        btn.textContent = option;
        btn.onclick = () => selectAnswer(btn, currentLandmark.name);
        optionsContainer.appendChild(btn);
      });

      timeLeft = 15;
      timerElement.textContent = timeLeft;
      timer = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
      timeLeft--;
      timerElement.textContent = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timer);
        showCorrect(landmarks[currentIndex].name);
      }
    }

    function selectAnswer(button, correctAnswer) {
      clearInterval(timer);
      const allButtons = optionsContainer.querySelectorAll("button");
      allButtons.forEach(btn => (btn.disabled = true));

      if (button && button.textContent === correctAnswer) {
        button.style.background = "#28a745";
        score++;
        gameContainer.classList.add("correct");
      } else {
        if (button) button.style.background = "#dc3545";
        allButtons.forEach(btn => {
          if (btn.textContent === correctAnswer) btn.style.background = "#28a745";
        });
        gameContainer.classList.add("wrong");
      }

      scoreElement.textContent = "üèÜ Score: " + score;

      if (autoNextToggle.checked) {
        setTimeout(nextQuestion, 1200);
      } else {
        nextBtn.disabled = false;
      }
    }

    function showCorrect(correctAnswer) {
      const allButtons = optionsContainer.querySelectorAll("button");
      allButtons.forEach(btn => {
        btn.disabled = true;
        if (btn.textContent === correctAnswer) btn.style.background = "#28a745";
      });
      gameContainer.classList.add("wrong");
      if (autoNextToggle.checked) {
        setTimeout(nextQuestion, 1200);
      } else {
        nextBtn.disabled = false;
      }
    }

    function resetState() {
      clearInterval(timer);
      optionsContainer.innerHTML = "";
      nextBtn.disabled = true;
      gameContainer.classList.remove("correct", "wrong");
    }

    function nextQuestion() {
      currentIndex++;
      if (currentIndex < landmarks.length) {
        loadQuestion();
      } else {
        endGame();
      }
    }

    function endGame() {
      resetState();
      finalScore.textContent = score;
      gameOverDiv.style.display = "block";
    }

    function restartGame() {
      score = 0;
      currentIndex = 0;
      gameOverDiv.style.display = "none";
      loadQuestion();
    }

    nextBtn.addEventListener("click", nextQuestion);
  </script>
</body>
</html>
