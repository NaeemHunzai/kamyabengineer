<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Important for mobile -->
  <title>Currency Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: white;
      color: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 15px;      /* padding for mobile edges */
      margin: 0;
    }
    .quiz-container {
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      width: 100%;             /* full width on small screens */
      max-width: 450px;        /* limit on large screens */
      padding: 20px;
      text-align: center;
      border: 5px solid transparent;
      transition: border-color 0.3s ease;
      box-sizing: border-box;
    }
    .quiz-container.correct { border-color: #2ecc71; }
    .quiz-container.wrong { border-color: #e74c3c; }

    h2 {
      margin-bottom: 20px;
      font-size: 20px;
      color: #000;
      line-height: 1.4;
    }

    .options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }
    .option-btn {
      font-size: 15px;
      background: #2980b9;
      color: #fff;
      border: none;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s;
      word-wrap: break-word;   /* handle long currency names */
    }
    .option-btn:hover { background: #1f6391; transform: scale(1.05); }

    .controls { margin-top: 15px; }
    .next-btn, .restart-btn {
      background: #27ae60;
      color: white;
      border: none;
      padding: 10px 20px;
      margin-top: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
      font-size: 15px;
    }
    .next-btn:hover, .restart-btn:hover { background: #219150; }

    .timer {
      margin: 15px 0;
      font-size: 18px;
      font-weight: bold;
      color: #000;
    }
    .auto-next {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      margin-top: 10px;
      margin-bottom: 10px;
      font-size: 14px;
      color: #000;
    }
    .score {
      font-size: 20px;
      font-weight: bold;
      margin-top: 15px;
      color: #000;
    }

    /* Make buttons 1 per row on very small screens */
    @media (max-width: 400px) {
      .options {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="quiz-container" id="quizBox">
    <h2 id="question">Loading question...</h2>
    <div class="options" id="options"></div>
    <div class="timer" id="timer">Time: 10s</div>

    <div class="auto-next">
      <input type="checkbox" id="autoNext">
      <label for="autoNext">Auto Next</label>
    </div>

    <div class="controls">
      <button class="next-btn" onclick="nextQuestion()">Next</button>
      <button class="restart-btn" onclick="restartQuiz()" style="display:none;">Restart Quiz</button>
    </div>
    <div class="score" id="scoreBox"></div>
  </div>

  <script>
    const database = [
      { country: "United States", currency: "US Dollar" },
      { country: "United Kingdom", currency: "Pound Sterling" },
      { country: "Japan", currency: "Yen" },
      { country: "India", currency: "Indian Rupee" },
      { country: "China", currency: "Yuan (Renminbi)" },
      { country: "Pakistan", currency: "Pakistani Rupee" },
      { country: "Canada", currency: "Canadian Dollar" },
      { country: "Brazil", currency: "Brazilian Real" },
      { country: "Saudi Arabia", currency: "Saudi Riyal" },
      { country: "South Africa", currency: "South African Rand" }
    ];

    let questions = [];
    let currentQuestionIndex = 0;
    let timerInterval;
    let timeLeft = 10;
    let score = 0;
    const MAX_QUESTIONS = 5;

    function shuffleArray(array) {
      return array
        .map(value => ({ value, sort: Math.random() }))
        .sort((a, b) => a.sort - b.sort)
        .map(({ value }) => value);
    }

    function startQuiz() {
      questions = shuffleArray(database).slice(0, MAX_QUESTIONS);
      currentQuestionIndex = 0;
      score = 0;
      document.getElementById("scoreBox").innerText = "";
      document.querySelector(".restart-btn").style.display = "none";
      document.querySelector(".next-btn").style.display = "inline-block";
      document.querySelector(".auto-next").style.display = "flex";
      loadQuestion();
    }

    function loadQuestion() {
      clearInterval(timerInterval);
      document.getElementById("quizBox").classList.remove("correct", "wrong");

      if (currentQuestionIndex >= questions.length) {
        endQuiz();
        return;
      }

      const q = questions[currentQuestionIndex];
      document.getElementById("question").innerText =
        `What is the currency of ${q.country}?`;

      let options = [q.currency];
      let wrongOptions = shuffleArray(database.filter(item => item.currency !== q.currency))
                          .slice(0, 3)
                          .map(item => item.currency);
      options = shuffleArray([...options, ...wrongOptions]);

      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      options.forEach(opt => {
        const btn = document.createElement("button");
        btn.innerText = opt;
        btn.classList.add("option-btn");
        btn.onclick = () => checkAnswer(opt === q.currency);
        optionsDiv.appendChild(btn);
      });

      timeLeft = 10;
      document.getElementById("timer").innerText = `Time: ${timeLeft}s`;
      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").innerText = `Time: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          document.getElementById("quizBox").classList.add("wrong");
          if (document.getElementById("autoNext").checked) {
            setTimeout(nextQuestion, 800);
          }
        }
      }, 1000);
    }

    function checkAnswer(isCorrect) {
      clearInterval(timerInterval);
      if (isCorrect) {
        document.getElementById("quizBox").classList.add("correct");
        score++;
      } else {
        document.getElementById("quizBox").classList.add("wrong");
      }
      if (document.getElementById("autoNext").checked) {
        setTimeout(nextQuestion, 800);
      }
    }

    function nextQuestion() {
      clearInterval(timerInterval);
      const quizBox = document.getElementById("quizBox");
      if (!quizBox.classList.contains("correct") && !quizBox.classList.contains("wrong")) {
        quizBox.classList.add("wrong");
      }
      setTimeout(() => {
        currentQuestionIndex++;
        loadQuestion();
      }, 800);
    }

    function endQuiz() {
      document.getElementById("question").innerText = "Quiz Completed!";
      document.getElementById("options").innerHTML = "";
      document.querySelector(".next-btn").style.display = "none";
      document.querySelector(".restart-btn").style.display = "inline-block";
      document.getElementById("timer").innerText = "";
      document.getElementById("scoreBox").innerText = `Your Score: ${score} / ${MAX_QUESTIONS}`;
      document.querySelector(".auto-next").style.display = "none";
    }

    function restartQuiz() {
      document.getElementById("quizBox").classList.remove("correct", "wrong");
      startQuiz();
    }

    window.onload = startQuiz;
  </script>
</body>
</html>
