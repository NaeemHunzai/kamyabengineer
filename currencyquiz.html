<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Currency Quiz</title>
  <style>
    :root{
      --primary: #007bff;
      --btn-bg: #007bff;
      --btn-bg-hover: #0056b3;
      --ok: #28a745;
      --bad: #dc3545;
      --white: #ffffff;
      --black: #111;
    }

    /* page */
    body{
      margin:0;
      padding:12px;
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background:var(--white);
      color:var(--black);
      display:flex;
      align-items:flex-start;
      justify-content:center;
      min-height:100vh;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* quiz card */
    .quiz-container{
      width:100%;
      max-width:520px;
      background:var(--white);
      border-radius:12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      padding:16px;
      box-sizing:border-box;
      border:4px solid transparent;
      transition:border-color .20s ease, transform .12s ease;
      text-align:center; /* center question text */
    }
    .quiz-container.correct{ border-color: var(--ok); }
    .quiz-container.wrong{ border-color: var(--bad); }

    /* question */
    #question {
      margin: 0 0 12px 0;
      font-size: 20px;
      line-height: 1.2;
      color: var(--black);
      text-align: center;
    }

    /* options grid */
    .options{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
      margin:12px 0;
    }

    .option-btn{
      background:var(--btn-bg);
      color:var(--white);
      border:0;
      padding:12px 10px;
      font-size:15px;
      border-radius:8px;
      cursor:pointer;
      width:100%;
      word-break:break-word;
      transition: transform .10s ease, background .12s ease, opacity .12s ease;
    }
    .option-btn:active{ transform: translateY(1px); }
    .option-btn:hover{ background:var(--btn-bg-hover); }
    .option-btn[disabled]{ opacity: .7; cursor: default; }

    /* controls */
    .timer{
      margin:10px 0;
      font-weight:700;
      color:var(--black);
      font-size:16px;
      text-align:center;
    }

    .auto-next {
      display:flex;
      justify-content:center;
      align-items:center;
      gap:8px;
      margin-bottom:8px;
      color:var(--black);
      font-size:14px;
    }

    .controls {
      display:flex;
      gap:8px;
      flex-direction:column;
      align-items:stretch;
      margin-top:6px;
    }

    .next-btn, .restart-btn {
      background:var(--ok);
      color:var(--white);
      border:0;
      padding:12px;
      border-radius:8px;
      font-size:15px;
      cursor:pointer;
      width:100%;
    }
    .next-btn:hover, .restart-btn:hover{ filter:brightness(.95); }

    .score {
      margin-top:12px;
      text-align:center;
      font-weight:700;
      color:var(--black);
      font-size:16px;
    }

    /* mobile: single column for smaller widths */
    @media (max-width:420px){
      .options{ grid-template-columns:1fr; }
      #question{ font-size:18px; }
      .option-btn{ padding:14px; font-size:16px; }
      .timer{ font-size:15px; }
    }
  </style>
</head>
<body>
  <div class="quiz-container" id="quizBox" role="application" aria-labelledby="question">
    <h2 id="question">Loading question...</h2>

    <div class="options" id="options" aria-live="polite"></div>

    <div class="timer" id="timer">Time: 10s</div>

    <div class="auto-next" id="autoNextWrap">
      <input type="checkbox" id="autoNext" />
      <label for="autoNext">Auto Next</label>
    </div>

    <div class="controls">
      <button id="nextBtn" class="next-btn" type="button">Next</button>
      <button id="restartBtn" class="restart-btn" type="button" style="display:none;">Restart Quiz</button>
    </div>

    <div id="scoreBox" class="score" aria-live="polite"></div>
  </div>

  <script>
    /*********** Database (replace/extend if needed) ***********/
    const database = [
      { country: "United States", currency: "US Dollar" },
      { country: "United Kingdom", currency: "Pound Sterling" },
      { country: "Japan", currency: "Yen" },
      { country: "India", currency: "Indian Rupee" },
      { country: "China", currency: "Yuan (Renminbi)" },
      { country: "Saudi Arabia", currency: "Saudi Riyal" },
      { country: "Russia", currency: "Russian Ruble" },
      { country: "Switzerland", currency: "Swiss Franc" },
      { country: "Brazil", currency: "Brazilian Real" },
      { country: "Pakistan", currency: "Pakistani Rupee" },
      { country: "Canada", currency: "Canadian Dollar" },
      { country: "Australia", currency: "Australian Dollar" },
      { country: "New Zealand", currency: "New Zealand Dollar" },
      { country: "South Africa", currency: "South African Rand" },
      { country: "Nigeria", currency: "Nigerian Naira" },
      { country: "Mexico", currency: "Mexican Peso" },
      { country: "Argentina", currency: "Argentine Peso" },
      { country: "Turkey", currency: "Turkish Lira" },
      { country: "Egypt", currency: "Egyptian Pound" },
      { country: "Bangladesh", currency: "Bangladeshi Taka" },
      { country: "Indonesia", currency: "Indonesian Rupiah" },
      { country: "Malaysia", currency: "Malaysian Ringgit" },
      { country: "Singapore", currency: "Singapore Dollar" },
      { country: "Thailand", currency: "Thai Baht" },
      { country: "Philippines", currency: "Philippine Peso" },
      { country: "Vietnam", currency: "Vietnamese Dong" },
      { country: "South Korea", currency: "South Korean Won" },
      { country: "UAE", currency: "UAE Dirham" },
      { country: "Qatar", currency: "Qatari Riyal" },
      { country: "Kuwait", currency: "Kuwaiti Dinar" },
      { country: "Bahrain", currency: "Bahraini Dinar" },
      { country: "Oman", currency: "Omani Rial" },
      { country: "Iran", currency: "Iranian Rial" },
      { country: "Iraq", currency: "Iraqi Dinar" },
      { country: "Nepal", currency: "Nepalese Rupee" },
      { country: "Sri Lanka", currency: "Sri Lankan Rupee" },
      { country: "Kenya", currency: "Kenyan Shilling" },
      { country: "Morocco", currency: "Moroccan Dirham" },
      { country: "Israel", currency: "Israeli New Shekel" },
      { country: "Eurozone", currency: "Euro" }
      // add more as needed...
    ];

    /*********** Config & runtime state ***********/
    const MAX_QUESTIONS = 20;
    const QUESTIONS_PER_QUIZ = Math.min(MAX_QUESTIONS, database.length);

    let questions = [];            // the shuffled subset used this run
    let currentIndex = 0;          // 0-based index into questions
    let score = 0;
    let answered = false;          // whether current question has been answered
    let timerInterval = null;      // interval id for countdown
    let autoAdvanceTimeout = null; // timeout id for scheduled auto-advance
    let timeLeft = 10;

    /* DOM refs */
    const quizBox = document.getElementById('quizBox');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const timerEl = document.getElementById('timer');
    const scoreBox = document.getElementById('scoreBox');
    const nextBtn = document.getElementById('nextBtn');
    const restartBtn = document.getElementById('restartBtn');
    const autoNextWrap = document.getElementById('autoNextWrap');

    /*********** Helpers ***********/
    function shuffleArray(arr){
      return arr
        .map(v => ({v, r: Math.random()}))
        .sort((a,b)=> a.r - b.r)
        .map(x => x.v);
    }

    function clearTimers(){
      if(timerInterval){ clearInterval(timerInterval); timerInterval = null; }
      if(autoAdvanceTimeout){ clearTimeout(autoAdvanceTimeout); autoAdvanceTimeout = null; }
    }

    /*********** Start / Restart ***********/
    function startQuiz(){
      // choose QUESTIONS_PER_QUIZ random items
      questions = shuffleArray(database).slice(0, QUESTIONS_PER_QUIZ);
      currentIndex = 0;
      score = 0;
      answered = false;
      scoreBox.textContent = '';
      restartBtn.style.display = 'none';
      nextBtn.style.display = 'block';
      autoNextWrap.style.display = 'flex';
      loadQuestion();
    }

    /*********** Load question ***********/
    function loadQuestion(){
      clearTimers();
      quizBox.classList.remove('correct','wrong');
      answered = false;

      if(currentIndex >= questions.length) return endQuiz();

      const q = questions[currentIndex];

      // show question centered
      questionEl.textContent = `What is the currency of ${q.country}?`;

      // prepare 4 options (1 correct + 3 random wrong)
      const wrongPool = shuffleArray(database.filter(it => it.currency !== q.currency)).slice(0,3).map(it => it.currency);
      const opts = shuffleArray([ q.currency, ...wrongPool ]);

      // render options
      optionsEl.innerHTML = '';
      opts.forEach((opt, idx) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'option-btn';
        btn.textContent = opt;
        btn.dataset.opt = opt;
        btn.disabled = false;
        btn.addEventListener('click', () => onSelectOption(opt, btn));
        optionsEl.appendChild(btn);
      });

      // start countdown
      timeLeft = 10;
      timerEl.textContent = `Time: ${timeLeft}s`;
      timerInterval = setInterval(() => {
        timeLeft--;
        timerEl.textContent = `Time: ${timeLeft}s`;
        if(timeLeft <= 0){
          clearTimers();
          // mark skipped as wrong
          quizBox.classList.add('wrong');
          answered = false; // remains unanswered
          if(document.getElementById('autoNext').checked){
            // schedule auto advance so user sees the red glow briefly
            autoAdvanceTimeout = setTimeout(() => {
              advanceToNext();
            }, 700);
          }
        }
      }, 1000);
    }

    /*********** Option selection handler ***********/
    function onSelectOption(optionText, btn){
      if(answered) return; // prevent double answers
      answered = true;

      // disable options
      Array.from(optionsEl.children).forEach(b => b.disabled = true);

      // stop timer
      clearTimers();

      const q = questions[currentIndex];
      const isCorrect = optionText === q.currency;

      if(isCorrect){
        quizBox.classList.add('correct');
        score++;
      } else {
        quizBox.classList.add('wrong');
      }

      // if auto-next enabled, schedule advance
      if(document.getElementById('autoNext').checked){
        autoAdvanceTimeout = setTimeout(() => {
          advanceToNext();
        }, 700);
      }
    }

    /*********** Manual Next button ***********/
    function nextQuestion(){
      // If an autoAdvance is pending, clear it (user clicked Next manually)
      if(autoAdvanceTimeout){ clearTimeout(autoAdvanceTimeout); autoAdvanceTimeout = null; }

      // stop timer
      if(timerInterval){ clearInterval(timerInterval); timerInterval = null; }

      // if user didn't answer, show red glow briefly
      if(!quizBox.classList.contains('correct') && !quizBox.classList.contains('wrong')){
        quizBox.classList.add('wrong');
        // mark as skipped (no score change)
        // still wait a bit for user to perceive the red border
        setTimeout(() => {
          advanceToNext();
        }, 700);
      } else {
        // already answered: advance immediately (short delay to keep UX consistent)
        setTimeout(() => {
          advanceToNext();
        }, 200);
      }
    }

    function advanceToNext(){
      clearTimers();
      currentIndex++;
      loadQuestion();
    }

    /*********** End and Restart ***********/
    function endQuiz(){
      clearTimers();
      questionEl.textContent = 'Quiz Completed!';
      optionsEl.innerHTML = '';
      nextBtn.style.display = 'none';
      restartBtn.style.display = 'block';
      timerEl.textContent = '';
      autoNextWrap.style.display = 'none';
      // show score out of 20 (or actual quiz count if DB < 20)
      const outOf = (database.length >= MAX_QUESTIONS) ? MAX_QUESTIONS : QUESTIONS_PER_QUIZ;
      scoreBox.textContent = `Your Score: ${score} / ${outOf}`;
    }

    function restartQuiz(){
      clearTimers();
      quizBox.classList.remove('correct','wrong');
      scoreBox.textContent = '';
      startQuiz();
    }

    /*********** Wire UI ***********/
    nextBtn.addEventListener('click', nextQuestion);
    restartBtn.addEventListener('click', restartQuiz);

    /*********** Kickoff ***********/
    // Ensure config consistency
    if(database.length < MAX_QUESTIONS){
      console.warn(`Database contains only ${database.length} items; quiz will run ${database.length} questions.`);
    }
    startQuiz();
  </script>
</body>
</html>
