<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Currency Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Important for mobile scaling -->
  <style>
    body {
      font-family: Arial, sans-serif;
      background: white;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh; /* instead of fixed vh */
    }
    .quiz-container {
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      width: 95%;             /* fill most of screen */
      max-width: 400px;       /* limit on large screens */
      padding: 15px;
      margin: 15px auto;
      text-align: center;
      border: 4px solid transparent;
      transition: border-color 0.3s ease;
      box-sizing: border-box;
    }
    .quiz-container.correct { border-color: #2ecc71; }
    .quiz-container.wrong { border-color: #e74c3c; }

    h2 {
      margin-bottom: 15px;
      font-size: 18px;  /* smaller for mobile */
      color: #000;
    }

    .options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      margin-bottom: 12px;
    }
    .option-btn {
      font-size: 14px;
      background: #2980b9;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s;
      width: 100%;
      word-wrap: break-word;   /* handles long text */
    }
    .option-btn:hover { background: #1f6391; transform: scale(1.03); }

    .controls { margin-top: 12px; }
    .next-btn, .restart-btn {
      background: #27ae60;
      color: white;
      border: none;
      padding: 10px 15px;
      margin-top: 8px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
      width: 100%;
    }
    .next-btn:hover, .restart-btn:hover { background: #219150; }

    .timer {
      margin: 10px 0;
      font-size: 16px;
      font-weight: bold;
      color: #000;
    }
    .auto-next {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      margin: 10px 0;
      font-size: 14px;
      color: #000;
    }
    .score {
      font-size: 18px;
      font-weight: bold;
      margin-top: 12px;
      color: #000;
    }

    /* Make extra small screens even friendlier */
    @media (max-width: 360px) {
      h2 { font-size: 16px; }
      .option-btn { font-size: 13px; padding: 8px; }
      .timer { font-size: 14px; }
      .score { font-size: 16px; }
    }
  </style>
</head>
<body>
  <div class="quiz-container" id="quizBox">
    <h2 id="question">Loading question...</h2>
    <div class="options" id="options"></div>
    <div class="timer" id="timer">Time: 10s</div>

    <div class="auto-next">
      <input type="checkbox" id="autoNext">
      <label for="autoNext">Auto Next</label>
    </div>

    <div class="controls">
      <button class="next-btn" onclick="nextQuestion()">Next</button>
      <button class="restart-btn" onclick="restartQuiz()" style="display:none;">Restart Quiz</button>
    </div>
    <div class="score" id="scoreBox"></div>
  </div>

  <script>
    const database = [
      { country: "United States", currency: "US Dollar" },
      { country: "United Kingdom", currency: "Pound Sterling" },
      { country: "Japan", currency: "Yen" },
      { country: "India", currency: "Indian Rupee" },
      { country: "Pakistan", currency: "Pakistani Rupee" }
    ];
    let questions = [], currentQuestionIndex = 0, timerInterval, timeLeft = 10, score = 0;
    const MAX_QUESTIONS = 5;

    function shuffleArray(array) {
      return array.map(v => ({ v, sort: Math.random() }))
        .sort((a, b) => a.sort - b.sort)
        .map(({ v }) => v);
    }

    function startQuiz() {
      questions = shuffleArray(database).slice(0, MAX_QUESTIONS);
      currentQuestionIndex = 0; score = 0;
      document.getElementById("scoreBox").innerText = "";
      document.querySelector(".restart-btn").style.display = "none";
      document.querySelector(".next-btn").style.display = "inline-block";
      document.querySelector(".auto-next").style.display = "flex";
      loadQuestion();
    }

    function loadQuestion() {
      clearInterval(timerInterval);
      document.getElementById("quizBox").classList.remove("correct","wrong");
      if (currentQuestionIndex >= questions.length) return endQuiz();

      const q = questions[currentQuestionIndex];
      document.getElementById("question").innerText = `What is the currency of ${q.country}?`;

      let options = [q.currency];
      let wrongOptions = shuffleArray(database.filter(item => item.currency !== q.currency))
                          .slice(0, 3).map(item => item.currency);
      options = shuffleArray([...options, ...wrongOptions]);

      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      options.forEach(opt => {
        const btn = document.createElement("button");
        btn.innerText = opt;
        btn.classList.add("option-btn");
        btn.onclick = () => checkAnswer(opt === q.currency);
        optionsDiv.appendChild(btn);
      });

      timeLeft = 10;
      document.getElementById("timer").innerText = `Time: ${timeLeft}s`;
      timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").innerText = `Time: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          document.getElementById("quizBox").classList.add("wrong");
          if (document.getElementById("autoNext").checked) setTimeout(nextQuestion, 800);
        }
      }, 1000);
    }

    function checkAnswer(isCorrect) {
      clearInterval(timerInterval);
      if (isCorrect) { document.getElementById("quizBox").classList.add("correct"); score++; }
      else { document.getElementById("quizBox").classList.add("wrong"); }
      if (document.getElementById("autoNext").checked) setTimeout(nextQuestion, 800);
    }

    function nextQuestion() {
      clearInterval(timerInterval);
      const quizBox = document.getElementById("quizBox");
      if (!quizBox.classList.contains("correct") && !quizBox.classList.contains("wrong")) {
        quizBox.classList.add("wrong");
      }
      setTimeout(() => { currentQuestionIndex++; loadQuestion(); }, 800);
    }

    function endQuiz() {
      document.getElementById("question").innerText = "Quiz Completed!";
      document.getElementById("options").innerHTML = "";
      document.querySelector(".next-btn").style.display = "none";
      document.querySelector(".restart-btn").style.display = "inline-block";
      document.getElementById("timer").innerText = "";
      document.getElementById("scoreBox").innerText = `Your Score: ${score} / ${MAX_QUESTIONS}`;
      document.querySelector(".auto-next").style.display = "none";
    }

    function restartQuiz() {
      document.getElementById("quizBox").classList.remove("correct","wrong");
      startQuiz();
    }

    window.onload = startQuiz;
  </script>
</body>
</html>
